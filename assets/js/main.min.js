const NUMBERS_RANGE=5,MAX_ERRORS=10,BALLS=get(".ball"),COLORS=["lightcoral","lightskyblue","khaki","lightgreen","mediumpurple"],BALL_COLOR=getVariableCSS("ball-initial");let _errors=0,_combo="",_lastCombos=[],_mode="classic";function createGame(e){for(let e=0;e<NUMBERS_RANGE;e++)_combo+=rand(0,NUMBERS_RANGE);BALLS.forEach(e=>{e.addEventListener("click",()=>{const t=COLORS.indexOf(e.style.backgroundColor);-1===t||t===COLORS.length-1?(e.style.backgroundColor=COLORS[0],e.setAttribute("colored",!0)):e.style.backgroundColor=COLORS[t+1],checkButton()})}),"easy"===e&&(_mode="easy",get("#mastermind").innerHTML=CONTENT.mastermindEasy),get("#titleScreen").style.display="none",get("#board").style.display="flex",get("#footer").innerHTML=FOOTER_INGAME,get("#classicMode").style.display="none",get("#easyMode").style.display="none",get("#check").style.display="block",get("#check").addEventListener("click",checkMove),checkButton()}function checkButton(){let e=0;BALLS.forEach(t=>{"true"==t.getAttribute("colored")&&e++}),get("#check").disabled=e!==NUMBERS_RANGE}function checkMove(){let e="";BALLS.forEach(t=>{const o=COLORS.indexOf(t.style.backgroundColor);e+=o}),e===_combo?endGame("win"):(_errors++,"classic"===_mode&&_errors===MAX_ERRORS?endGame("lose"):(_lastCombos.push(e),displayHistory(),BALLS.forEach(e=>{e.style.backgroundColor=BALL_COLOR,e.setAttribute("colored",!1)}),checkButton()))}function endGame(e){if("win"===e&&(get("#board").style.display="none",get("#check").style.display="none",get("#reload").style.display="block",get("#gameOver").style.display="flex",get("#gameOver").innerHTML=CONTENT.win_part1+_errors+CONTENT.win_part2),"lose"===e){get("#board").style.display="none",get("#check").style.display="none",get("#reload").style.display="block",get("#gameOver").style.display="flex",get("#gameOver").innerHTML=CONTENT.lose;const e=document.createElement("div");e.classList.add("mastermind"),e.id="answer",get("#gameOver").appendChild(e);for(let e=0;e<NUMBERS_RANGE;e++){const t=document.createElement("div");t.classList.add("ball"),t.style.backgroundColor=COLORS[_combo[e]],get("#gameOver").lastChild.appendChild(t)}}}function displayHistory(){get("#history").innerHTML="",_lastCombos.forEach((e,t)=>{const o=document.createElement("div");o.classList.add("mastermind"),get("#history").appendChild(o);const l=document.createElement("p");l.innerHTML=t+1,get("#history").lastChild.appendChild(l);let s=0,a=0;for(let t=0;t<NUMBERS_RANGE;t++){const o=document.createElement("div");o.classList.add("ball"),o.setAttribute("color",-1),o.style.backgroundColor=COLORS[e[t]],get("#history").lastChild.appendChild(o),e[t]===_combo[t]?s++:a++}const n=document.createElement("p");n.classList.add("history"),n.innerHTML=s+" ✔️  "+a+" ❌ ",get("#history").lastChild.appendChild(n)}),get("#history").scrollTo(0,get("#history").scrollHeight)}get("#classicMode").addEventListener("click",()=>{createGame("classic")}),get("#easyMode").addEventListener("click",()=>{createGame("easy")}),get("#reload").addEventListener("click",()=>{document.location.reload()});